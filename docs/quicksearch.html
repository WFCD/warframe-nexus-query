<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"lib_AttachmentCreator.js.html":{"id":"lib_AttachmentCreator.js.html","title":"Source: lib/AttachmentCreator.js","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Source: lib/AttachmentCreator.js 'use strict'; const getColors = require('get-image-colors'); const imageDownloader = require('image-downloader'); const noResultAttachment = { type: 'rich', description: 'No result', color: 0xff55ff, url: 'https://warframe.market', footer: { text: 'Pricechecks from NexusHub and Warframe.Market', icon_url: 'https://warframestat.us/wfcd_logo_color.png', }, }; /** * Calculate the safe value for a provided value * @param {string} value provided value * @returns {string} safe value */ function safeValue(value) { return value ? `${value}p` : 'No data'; } /** * Calculate the safe value for a provided value * @param {string} value1 provided minimum value * @param {string} value2 provided maximum value * @returns {string} safe value */ function safeRange(value1, value2) { return value1 ? `${value1}p - ${value2}p` : 'No data'; } /** * Pad the left side of a string so that all componets * have the same string length before the pipe * @param {string} str the location string to pad * @param {number} length to make the string * @returns {string} the padded location string */ function pad(str, length) { let stringRet; const len = length || 10; if (str.length &lt; len) { stringRet = pad(`${str} `, len); } else { stringRet = str; } return stringRet; } class AttachmentCreator { constructor(logger = console) { this.attachment = { type: 'rich', title: '', color: 0xff00ff, url: '', fields: [], thumbnail: { url: '' }, footer: { icon_url: '', text: 'Price data provided by Nexus Stats &amp; Warframe.Market', }, }; this.logger = logger; } attachmentFromComponents(components, query) { const attachment = JSON.parse(JSON.stringify(this.attachment)); attachment.title = `Query results for: &quot;${query}&quot;`; const nexusComponents = components .filter(component =&gt; component &amp;&amp; component.components &amp;&amp; component.components[0].type === 'nexus-v2'); const marketComponents = components .filter(component =&gt; component &amp;&amp; component.type === 'market-v1' &amp;&amp; typeof component.prices.soldPrice !== 'undefined'); if (nexusComponents.length &gt; 0) { nexusComponents.forEach((nexusComponent) =&gt; { attachment.title = nexusComponent.title; nexusComponent.components.forEach((component) =&gt; { let found = false; attachment.thumbnail.url = nexusComponent.thumbnail; attachment.description = `Query results for: &quot;${query}&quot;`; const nexusMedian = safeValue(component.prices.median); const nexusRange = safeRange(component.prices.minimum, component.prices.maximum); if (marketComponents.length &gt; 0 &amp;&amp; marketComponents[0].prices.soldPrice) { marketComponents.forEach((marketComponent) =&gt; { if (!found &amp;&amp; (marketComponent.name.indexOf(component.name) &gt; -1 || (nexusComponents.length === 1 &amp;&amp; marketComponents.length === 1))) { found = true; attachment.color = parseInt(marketComponent.color, 16); attachment.url = marketComponent.url; attachment.thumbnail.url = marketComponent.thumbnail; const marketMedian = safeValue(marketComponent.prices.soldPrice); const marketRange = safeRange( marketComponent.prices.minimum, marketComponent.prices.maximum, ); attachment.fields.push({ name: `${marketComponents.length &lt; 2 ? '_ _' : marketComponent.name.replace(nexusComponent.title, '')}${component.ducats ? ` - ${component.ducats} ducats` : ''}`, value: '```haskell\\n' + `${pad('Value', 7)}|${pad(' Nexus', 13)}| Market\\n` + `${pad('Median', 7)}|${pad(` ${nexusMedian}`, 13)}| ${marketMedian}\\n` + `${pad('Range', 7)}|${pad(` ${nexusRange}`, 13)}| ${marketRange}\\n\\n` + `Trade Tax: ${marketComponent.tradingTax}cr\\n` + '```\\n', inline: true, }); } }); } else { attachment.url = nexusComponent.url; attachment.color = parseInt(nexusComponent.color, 16); attachment.fields.push({ name: `${component.name}${component.ducats ? ` - ${component.ducats} ducats` : ''}`, value: '```haskell\\n' + `${pad('Value', 7)}| ${pad('Nexus', 13)} | Market\\n` + `${pad('Median', 7)}| ${pad(nexusMedian, 13)} | No data\\n` + `${pad('Range', 7)}| ${pad(nexusRange, 13)} | No data\\n\\n` + '```\\n', inline: true, }); } }); attachment.fields.push({ name: '_ _', value: `Supply: **${nexusComponent.supply.count}** units (${String((parseFloat(nexusComponent.supply.percentage || 0) * 100).toFixed(2))}%) ` + `- Demand: **${nexusComponent.demand.count}** units (${String((parseFloat(nexusComponent.demand.percentage || 0) * 100).toFixed(2))}%)`, }); }); } else if (marketComponents.length &gt; 0) { marketComponents .forEach((marketComponent) =&gt; { attachment.color = parseInt(marketComponent.color, 16); attachment.title = marketComponent.name.replace(/\\sset/i, ''); attachment.url = marketComponent.url; attachment.thumbnail.url = marketComponent.thumbnail; attachment.description = `Query results for: &quot;${query}&quot;`; const marketMedian = safeValue(marketComponent.prices.soldPrice); const marketRange = safeRange( marketComponent.prices.minimum, marketComponent.prices.maximum, ); attachment.fields.push({ name: marketComponent.name, value: '```haskell\\n' + `${pad('Value', 7)}|${pad(' Nexus', 13)}| Market\\n` + `${pad('Median', 7)}|${pad(' No data', 13)}| ${marketMedian}\\n` + `${pad('Range', 7)}|${pad(' No data', 13)}| ${marketRange}\\n\\n` + `Trade Tax: ${marketComponent.tradingTax}cr\\n` + '```\\n', inline: true, }); }); } else { return noResultAttachment; } return attachment; } /** * Set colors for nexus components * @param {NexusItem} components Array of nexus items * @returns {Array.&lt;NexusItem&gt;} Array of nexus items with colors */ async mapNexusColors(components) { const colored = []; try { components.forEach(async (component) =&gt; { const coloredComponent = component; const imgUrl = `https://nexus-stats.com/img/items/${encodeURIComponent(component.title)}-min.png`; const options = { url: imgUrl, dest: `${__dirname}/../tmp/${component.title}.png`, }; const { image } = await imageDownloader.image(options); const colors = await getColors(image, 'image/png'); coloredComponent.color = typeof colors !== 'undefined' ? colors[0].hex().replace('#', '0x') : 0xff0000; colored.push(coloredComponent); }); return colored; } catch (e) { this.logger.error(e); return colored; } } } module.exports = AttachmentCreator; × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"lib_nexus_v2_component.js.html":{"id":"lib_nexus_v2_component.js.html","title":"Source: lib/nexus/v2/component.js","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Source: lib/nexus/v2/component.js 'use strict'; const median = (values) =&gt; { values.sort((a, b) =&gt; a - b); const half = Math.floor(values.length / 2); if (values.length % 2) { return values[half]; } return (values[half - 1] + values[half]) / 2.0; }; /** * Represents an individual component object of an item. */ class Component { /** * Represents an individual component object of an item. * @param {json} data the component data to parse into a component * @param {Array&lt;Ojbect&gt;} items objects with data for ducats * @constructor */ constructor(data, items) { /** * Name of the component, display value * @type {string} */ this.name = data.name.replace(/(pc|ps4|xb1|switch)/ig, ''); /** * Supply for the component * @type {number} */ this.supply = data.supply; /** * Demand for the component * @type {number} */ this.demand = data.demand; /** * Average prices for the component * @type {Object} * @property {number} avg - average value * @property {number} median - median value * @property {number} minimum - minimum value * @property {number} maximum - maximum value */ const p = data.prices; this.prices = { buying: p.buying.current, selling: p.selling.current, avg: (p.buying.current.avg + p.selling.current.avg) / 2, median: median([p.buying.current.median, p.selling.current.median]), minimum: Math.min(p.buying.current.min, p.selling.current.max), maximum: Math.max(p.buying.current.max, p.selling.current.max), }; this.ducats = (items.filter(item =&gt; item.name === data.name)[0] || { ducats: 0 }).ducats; this.type = 'nexus-v2'; } /** * The components's string representation * @returns {string} */ toString() { return `\\u221F${this.padName(this.name)} | average: ${(this.prices.avg &amp;&amp; !isNaN(this.prices.avg) ? `${String(parseFloat(this.prices.avg).toFixed(2))}p` : '0p')}`; } /** * Pad the left side of a string so that all componets * have the same string length before the pipe * @param {string} locationString the location string to pad * @returns {string} the padded location string */ padName(locationString) { let stringRet; if (locationString.length &lt; 10) { stringRet = this.padName(`${locationString} `); } else { stringRet = locationString; } return stringRet; } } module.exports = Component; × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"lib_nexus_v1_component.js.html":{"id":"lib_nexus_v1_component.js.html","title":"Source: lib/nexus/v1/component.js","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Source: lib/nexus/v1/component.js 'use strict'; const median = (values) =&gt; { values.sort((a, b) =&gt; a - b); const half = Math.floor(values.length / 2); if (values.length % 2) { return values[half]; } return (values[half - 1] + values[half]) / 2.0; }; /** * Represents an individual component object of an item. */ class Component { /** * Represents an individual component object of an item. * @param {json} data the component data to parse into a component * @param {Array&lt;Ojbect&gt;} items objects with data for ducats * @constructor */ constructor(data, items) { /** * Name of the component, display value * @type {string} */ this.name = data.name; /** * Supply for the component * @type {number} */ this.supply = data.supply; /** * Demand for the component * @type {number} */ this.demand = data.demand; /** * Average prices for the component * @type {Object} * @property {number} avg - average value * @property {number} median - median value * @property {number} minimum - minimum value * @property {number} maximum - maximum value */ this.prices = { buying: { avg: data.buying.avg, median: data.buying.median, minimum: data.buying.min, maximum: data.buying.max, }, selling: { avg: data.selling.avg, median: data.selling.median, minimum: data.selling.min, maximum: data.selling.max, }, avg: (data.buying.avg + data.selling.avg) / 2, median: median([data.buying.median, data.selling.median]), minimum: Math.min(data.buying.min, data.selling.max), maximum: Math.max(data.buying.max, data.selling.max), }; this.ducats = (items.filter(item =&gt; item.name === data.name)[0] || { ducats: 0 }).ducats; this.type = 'nexus-v1'; } /** * The components's string representation * @returns {string} */ toString() { return `\\u221F${this.padName(this.name)} | average: ${(this.prices.avg &amp;&amp; !isNaN(this.prices.avg) ? `${String(parseFloat(this.prices.avg).toFixed(2))}p` : '0p')}`; } /** * Pad the left side of a string so that all componets * have the same string length before the pipe * @param {string} locationString the location string to pad * @returns {string} the padded location string */ padName(locationString) { let stringRet; if (locationString.length &lt; 10) { stringRet = this.padName(`${locationString} `); } else { stringRet = locationString; } return stringRet; } } module.exports = Component; × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"lib_market_v1_MarketFetcher.js.html":{"id":"lib_market_v1_MarketFetcher.js.html","title":"Source: lib/market/v1/MarketFetcher.js","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Source: lib/market/v1/MarketFetcher.js 'use strict'; const getColors = require('get-image-colors'); const imageDownloader = require('image-downloader'); const jsonQuery = require('json-query'); const JSONCache = require('json-fetch-cache'); const request = require('requestretry').defaults({ fullResponse: false }); const MarketSummary = require('./summary.js'); class MarketFetcher { constructor({ logger = console, settings }) { /** * The json cache stpromg data from warframe.market * @type {JSONCache} */ this.marketCache = new JSONCache(settings.urls.market, settings.maxCacheLength); this.settings = settings; this.urls = { market: process.env.MARKET_URL_OVERRIDE || 'https://api.warframe.market', marketAssets: process.env.MARKET_ASSETS_URL_OVERRIDE || 'https://warframe.market/static/assets/', marketBasePath: '/v1/items/', }; this.logger = logger; } async averagesForItem(urlName) { const data = JSON.parse(await request.get(`${this.urls.market}${this.urls.marketBasePath}${urlName}/statistics`)); const deepData = data.payload.statistics_live['48hours'][0]; const summary = { soldCount: deepData ? deepData.volume : null, soldPrice: deepData ? deepData.median : null, maximum: deepData ? deepData.max_price : null, minimum: deepData ? deepData.min_price : null, }; return summary; } async resultForItem(urlName) { const res = JSON.parse(await request.get(`${this.urls.market}${this.urls.marketBasePath}${urlName}`)); const data = res.payload ? await Promise.all(res.payload.item.items_in_set .map(item =&gt; this.summaryForItem(item))) : {}; return data; } async summaryForItem(item) { const summary = new MarketSummary(item); const prices = await this.averagesForItem(item.url_name); summary.prices = prices; const options = { url: summary.thumbnail, dest: `${__dirname}/../../../tmp/${summary.name}.png`, }; try { const { image } = await imageDownloader.image(options); if (image) { const colors = await getColors(image, 'image/png'); summary.color = typeof colors !== 'undefined' ? colors[0].hex().replace('#', '0x') : 0xff0000; } } catch (e) { this.logger.error(e); } return summary; } async queryMarket(query, { attachments, successfulQuery }) { let combinedAttachments = [].concat(attachments); try { // get market data const marketData = await this.marketCache.getDataJson(); const marketResults = jsonQuery(`en[*item_name~/^${successfulQuery || query}.*/i]`, { data: marketData.payload ? marketData.payload.items : {}, allowRegexp: true, }).value; if (!marketResults || marketResults.length &lt; 1) { return attachments; } const marketComponents = await this.resultForItem(marketResults[0].url_name); if (marketComponents.length &gt; 0) { combinedAttachments = combinedAttachments.concat(marketComponents); } } catch (err) { // swallow market errors this.logger.error(err); } return combinedAttachments; } } module.exports = MarketFetcher; × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"lib_nexus_v2_item.js.html":{"id":"lib_nexus_v2_item.js.html","title":"Source: lib/nexus/v2/item.js","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Source: lib/nexus/v2/item.js 'use strict'; const md = require('node-md-config'); const Component = require('./component.js'); /** * Describes an item, such as a prime item, mod, arcane, or syndicate item */ class NexusItem { /** * @param {JSON} data to construct an item from * @param {string} path for item on nexus-stats.com * @param {Object} settings a settings object */ constructor(data, path, settings) { /** * Array of Component objects * @type {Array&lt;Component&gt;} */ this.components = []; /** * Title (name) of item * @type {string} */ this.title = data.name; /** * Type of the item, such as: * * Prime * * Mods * * Arcane * * Syndicate * @type {string} */ this.type = data.type; /** * Supply for the component * @type {Object.&lt;number&gt;} */ this.supply = data.supply; /** * Demand for the component * @type {Object.&lt;number&gt;} */ this.demand = data.demand; data.components.forEach((componentData) =&gt; { this.components.push(new Component(componentData, data.parts)); }); this.url = `${settings.urls.nexusWeb}${path}`; this.thumbnail = `${settings.urls.nexusWeb}${data.item.components[0].imgUrl}`; } /** * String representation of this Item. * @returns {string} */ toString() { let componentString = `${md.codeMulti}${this.title}${md.lineEnd}\\u3000Supply: ${this.supply.count} units - ` + `${String((parseFloat(this.supply.percentage || 0) * 100).toFixed())}%${md.lineEnd}` + `\\u3000Demand: ${this.demand.count} units - ${String((parseFloat(this.demand.percentage || 0) * 100).toFixed(2))}%` + `${md.lineEnd}\\u3000\\u3000`; for (let i = 0; i &lt; this.components.length; i += 1) { componentString += this.components[i].toString() + (i &lt; this.components.length - 1 ? `,${md.lineEnd}\\u3000\\u3000` : ''); } return `${componentString}${md.blockEnd}`; } } module.exports = NexusItem; × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"lib_nexus_v1_item.js.html":{"id":"lib_nexus_v1_item.js.html","title":"Source: lib/nexus/v1/item.js","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Source: lib/nexus/v1/item.js 'use strict'; const md = require('node-md-config'); const Component = require('./component.js'); /** * Describes an item, such as a prime item, mod, arcane, or syndicate item */ class NexusItem { /** * @param {JSON} data to construct an item from * @param {string} path for item on nexus-stats.com * @param {Object} settings a settings object */ constructor(data, path, settings) { /** * Array of Component objects * @type {Array&lt;Component&gt;} */ this.components = []; /** * Title (name) of item * @type {string} */ this.title = data.name; /** * Type of the item, such as: * * Prime * * Mods * * Arcane * * Syndicate * @type {string} */ this.type = data.type; /** * Supply for the component * @type {Object.&lt;number&gt;} */ this.supply = data.supply; /** * Demand for the component * @type {Object.&lt;number&gt;} */ this.demand = data.demand; data.components.forEach((componentData) =&gt; { this.components.push(new Component(componentData, data.parts)); }); this.url = `${settings.urls.nexusWeb}${path}`; this.thumbnail = `${settings.urls.nexusWeb}${data.item.components[0].imgUrl}`; } /** * String representation of this Item. * @returns {string} */ toString() { let componentString = `${md.codeMulti}${this.title}${md.lineEnd}\\u3000Supply: ${this.supply.count} units - ` + `${String((parseFloat(this.supply.percentage || 0) * 100).toFixed())}%${md.lineEnd}` + `\\u3000Demand: ${this.demand.count} units - ${String((parseFloat(this.demand.percentage || 0) * 100).toFixed(2))}%` + `${md.lineEnd}\\u3000\\u3000`; for (let i = 0; i &lt; this.components.length; i += 1) { componentString += this.components[i].toString() + (i &lt; this.components.length - 1 ? `,${md.lineEnd}\\u3000\\u3000` : ''); } return `${componentString}${md.blockEnd}`; } } module.exports = NexusItem; × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"index.js.html":{"id":"index.js.html","title":"Source: index.js","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Source: index.js 'use strict'; const md = require('node-md-config'); const Settings = require('./lib/Settings.js'); const AttachmentCreator = require('./lib/AttachmentCreator.js'); const MarketFetcher = require('./lib/market/v1/MarketFetcher.js'); const NexusFetcher = require('./lib/nexus/v2/NexusFetcher'); const noResultAttachment = { type: 'rich', description: 'No result', color: '0xff55ff', url: 'https://warframe.market', footer: { text: 'Pricechecks from NexusStats and Warframe.Market', }, }; /** * Represents a queryable datastore of information derived from `https://nexus-stats.com/api` */ class PriceCheckQuerier { /** * Creates an instance representing a WarframeNexusStats data object * @constructor */ constructor({ logger = console, nexusApi = undefined } = {}) { this.settings = new Settings(); this.logger = logger; try { this.nexusFetcher = new NexusFetcher({ settings: this.settings, nexusApi, logger }); } catch (e) { this.logger.error(`couldn't set up nexus fetcher: ${e.message}`); } try { /** * Fetch market data * @type {MarketFetcher} */ this.marketFetcher = new MarketFetcher({ logger, settings: this.settings }); } catch (e) { this.logger.error(`couldn't set up market fetcher: ${e.message}`); } /** * Attachment creator for generating attachments * @type {AttachmentCreator} */ this.attachmentCreator = new AttachmentCreator(); } /** * Lookup a list of results for a query * @param {string} query Query to search the nexus-stats database against * @returns {Promise&lt;Array&lt;NexusItem&gt;&gt;} a Promise of an array of Item objects */ async priceCheckQuery(query) { if (!query) { throw new Error('This funcion requires a query to be provided'); } let attachments; let successfulQuery; const nexusResults = await this.nexusFetcher.queryNexus(query); ({ attachments, successfulQuery } = nexusResults); // eslint-disable-line prefer-const if (this.marketFetcher) { attachments = await this.marketFetcher.queryMarket(query, { attachments, successfulQuery }); } return attachments.length ? attachments : [noResultAttachment]; } /** * Lookup a list of results for a query * @param {string} query Query to search the nexus-stats database against * @returns {Promise&lt;string&gt;} a Promise of a string containing the results of the query */ async priceCheckQueryString(query) { const components = await this.priceCheckQuery(query); const tokens = []; components.slice(0, 4).forEach((component) =&gt; { tokens.push(`${md.lineEnd}${component.toString()}`); }); let componentsToReturnString = `${md.codeMulti}${tokens.join()}${md.blockEnd}`; componentsToReturnString = components.length &gt; 0 ? componentsToReturnString : this.settings.defaultString; return componentsToReturnString; } /** * Lookup a list of results for a query * @param {string} query Query to search the nexus-stats database against * @returns {Array&lt;Object&gt;} a Promise of an array of attachment objects */ async priceCheckQueryAttachment(query) { const components = await this.priceCheckQuery(query); const attachments = [this.attachmentCreator.attachmentFromComponents(components, query)]; return attachments; } stopUpdating() { if (this.marketCache) { this.marketCache.stop(); } } } module.exports = PriceCheckQuerier; × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"lib_Settings.js.html":{"id":"lib_Settings.js.html","title":"Source: lib/Settings.js","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Source: lib/Settings.js 'use strict'; /** * Settings storage for nexus query * @type {Settings} * @property {number} maxCacheLength - maximum length to store cached data * @property {string} nexusKey - User Key for Nexus-Stats * @property {string} nexusSecret - User Secret for Nexus-Stats * @property {string} nexusHubSecret - User Secret for NexusHub * @property {string} nexusHubKey - User Key for NexusHub * @property {Object} urls - URL list for nexus stats */ class Settings { constructor() { this.maxCacheLength = process.env.NEXUSSTATS_MAX_CACHED_TIME || 60000; this.nexusKey = process.env.NEXUSSTATS_USER_KEY || undefined; this.nexusSecret = process.env.NEXUSSTATS_USER_SECRET || undefined; this.nexusHubSecret = process.env.NEXUSHUB_USER_SECRET || undefined; this.neuxsHubUser = process.env.NEXUSHUB_USER_KEY || undefined; this.urls = { nexus: process.env.NEXUSSTATS_URL_OVERRIDE || 'https://api.nexus-stats.com/warframe/v1/items', nexusWeb: process.env.NEXUSSTATS_WEB_OVERRIDE || 'https://nexus-stats.com', nexusApi: process.env.NEXUS_API_OVERRIDE || 'https://api.nexus-stats.com', nexusAuth: process.env.NEXUS_AUTH_OVERRIDE || 'https://auth.nexus-stats.com', market: process.env.MARKET_URL_OVERRIDE || 'https://api.warframe.market/v1/items', marketAssets: process.env.MARKET_ASSETS_URL_OVERRIDE || 'https://warframe.market/static/assets/', }; this.defaultString = 'Operator, there is no such item pricecheck available.'; } } module.exports = Settings; × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"lib_market_v1_summary.js.html":{"id":"lib_market_v1_summary.js.html","title":"Source: lib/market/v1/summary.js","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Source: lib/market/v1/summary.js 'use strict'; const urls = { market: process.env.MARKET_URL_OVERRIDE || 'https://api.warframe.market/v1/items', marketAssets: process.env.MARKET_ASSETS_URL_OVERRIDE || 'https://warframe.market/static/assets/', }; /** * Represents an individual component object of an item. */ class Summary { /** * Represents an individual item. * @param {json} itemData the component data to parse into a summary * @constructor */ constructor(itemData) { this.name = itemData.en.item_name; this.thumbnail = `${urls.marketAssets}${itemData.thumb}`; this.partThumb = `${urls.marketAssets}${itemData.sub_icon}`; this.tradingTax = itemData.trading_tax || 0; this.ducats = itemData.ducats || 0; this.masteryLevel = itemData.mastery_level; this.tradable = itemData.tradable; this.wikiUrl = itemData.en.wiki_link; this.codex = itemData.en.codex; this.description = itemData.en.description.replace(/&lt;\\/?p&gt;/ig, ''); this.drops = itemData.en.drop; this.url = `http://warframe.market/items/${itemData.url_name}`; this.type = 'market-v1'; } /** * The components's string representation * @param {string} opt Option, either 'codex', 'item', 'location', 'all' * @returns {string} */ toString(opt) { let value = this.name; if (opt === 'codex' || opt === 'all') { value += '```\\n' + `Codex: ${this.codex}\\n`; } if (opt === 'item' || opt === 'all') { value += `${this.pad(`Requires: ${this.masteryLevel}`, 15)}| Tax: ${this.pad(`${this.tradingTax}cr`)}\\n` + `Item is ${this.tradable ? '' : ' not '} tradable\\n` + `${this.pad(`Sold ${this.prices.soldCount} for ${this.prices.soldPrice}`, 15)}|` + `Minimum ${this.prices.minimum} | Maximum ${this.prices.maximum}\\n`; } if (opt === 'location' || opt === 'all') { value += `${this.pad(`Drops: ${this.drops.map(drop =&gt; drop.name).join(', ')}`, 15)}\\n`; } value += `\\`\\`\\`\\n${this.wikiUrl}`; return `\\u221F${value}`; } pad(str, length, character) { let stringRet; if (str.length &lt; (length || 10)) { stringRet = this.padName(`${str}${character || ' '}`); } else { stringRet = str; } return stringRet; } } module.exports = Summary; × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"global.html":{"id":"global.html","title":"Global","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Global Methods pad(str, length) Pad the left side of a string so that all componets have the same string length before the pipe Parameters: Name Type Description str string the location string to pad length number to make the string Source: lib/AttachmentCreator.js, line 43 Returns: the padded location string Type string safeRange(value1, value2) Calculate the safe value for a provided value Parameters: Name Type Description value1 string provided minimum value value2 string provided maximum value Source: lib/AttachmentCreator.js, line 32 Returns: safe value Type string safeValue(value) Calculate the safe value for a provided value Parameters: Name Type Description value string provided value Source: lib/AttachmentCreator.js, line 22 Returns: safe value Type string × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Classes Classes Component Component NexusItem NexusItem PriceCheckQuerier Settings Summary × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue warframe-nexus-query A node project for allowing simple access to the https://nexus-stats.com/ api. Get Help on Discord Metrics Installationnpm install --save warframe-nexus-queryUsage Require Module File Accessor Description parameters warframe-nexus-query index.js .priceCheckQueryString Get Query result string query, callback warframe-nexus-query index.js .priceCheckQuery Get Query result objects, has more parameters available query, callback Environment variables Variable example default NEXUSSTATS_MAX_CACHED_TIME 600000 30000 NEXUSSTATS_URL_OVERRIDE 'https://nexus-stats.com/api' https://nexus-stats.com/api ObjectsItem components - List of component objects id - Unique identifier for the Item object title - Title of the item type - Type of the item supplyPercent - Of the total amount of item listings for this object, this is the percent for sale demandPercent - Of the total amount of item listings for this object, this is t looking to be bought supplyAmount - Of the total amount of item listings for this object, this is the number for sale demandAmount - Of the total amount of item listings for this object, this is the number looking to be bought Component name - Name of the component avgPrice - Average platinum price rawAverage - Raw average (non-rounded) price of the component data - Array of Miscellaneous data × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"Component.html":{"id":"Component.html","title":"Class: Component","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Class: Component Component Represents an individual component object of an item. new Component(data, items) Represents an individual component object of an item. Parameters: Name Type Description data json the component data to parse into a component items Array.&lt;Ojbect&gt; objects with data for ducats Source: lib/nexus/v2/component.js, line 13 Members demand :number Demand for the component Type: number Source: lib/nexus/v1/component.js, line 37 demand :number Demand for the component Type: number Source: lib/nexus/v2/component.js, line 37 name :string Name of the component, display value Type: string Source: lib/nexus/v1/component.js, line 25 name :string Name of the component, display value Type: string Source: lib/nexus/v2/component.js, line 25 prices :Object Average prices for the component Type: Object Properties: Name Type Description avg number average value median number median value minimum number minimum value maximum number maximum value Source: lib/nexus/v1/component.js, line 47 supply :number Supply for the component Type: number Source: lib/nexus/v2/component.js, line 31 supply :number Supply for the component Type: number Source: lib/nexus/v1/component.js, line 31 Methods padName(locationString) Pad the left side of a string so that all componets have the same string length before the pipe Parameters: Name Type Description locationString string the location string to pad Source: lib/nexus/v2/component.js, line 74 Returns: the padded location string Type string padName(locationString) Pad the left side of a string so that all componets have the same string length before the pipe Parameters: Name Type Description locationString string the location string to pad Source: lib/nexus/v1/component.js, line 83 Returns: the padded location string Type string toString() The components's string representation Source: lib/nexus/v1/component.js, line 73 Returns: Type string toString() The components's string representation Source: lib/nexus/v2/component.js, line 64 Returns: Type string Class: Component Component Represents an individual component object of an item. new Component(data, items) Represents an individual component object of an item. Parameters: Name Type Description data json the component data to parse into a component items Array.&lt;Ojbect&gt; objects with data for ducats Source: lib/nexus/v1/component.js, line 13 Members demand :number Demand for the component Type: number Source: lib/nexus/v1/component.js, line 37 demand :number Demand for the component Type: number Source: lib/nexus/v2/component.js, line 37 name :string Name of the component, display value Type: string Source: lib/nexus/v1/component.js, line 25 name :string Name of the component, display value Type: string Source: lib/nexus/v2/component.js, line 25 prices :Object Average prices for the component Type: Object Properties: Name Type Description avg number average value median number median value minimum number minimum value maximum number maximum value Source: lib/nexus/v1/component.js, line 47 supply :number Supply for the component Type: number Source: lib/nexus/v2/component.js, line 31 supply :number Supply for the component Type: number Source: lib/nexus/v1/component.js, line 31 Methods padName(locationString) Pad the left side of a string so that all componets have the same string length before the pipe Parameters: Name Type Description locationString string the location string to pad Source: lib/nexus/v2/component.js, line 74 Returns: the padded location string Type string padName(locationString) Pad the left side of a string so that all componets have the same string length before the pipe Parameters: Name Type Description locationString string the location string to pad Source: lib/nexus/v1/component.js, line 83 Returns: the padded location string Type string toString() The components's string representation Source: lib/nexus/v1/component.js, line 73 Returns: Type string toString() The components's string representation Source: lib/nexus/v2/component.js, line 64 Returns: Type string × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"NexusItem.html":{"id":"NexusItem.html","title":"Class: NexusItem","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Class: NexusItem NexusItem Describes an item, such as a prime item, mod, arcane, or syndicate item new NexusItem(data, path, settings) Parameters: Name Type Description data JSON to construct an item from path string for item on nexus-stats.com settings Object a settings object Source: lib/nexus/v2/item.js, line 9 Members components :Array.&lt;Component&gt; Array of Component objects Type: Array.&lt;Component&gt; Source: lib/nexus/v2/item.js, line 20 components :Array.&lt;Component&gt; Array of Component objects Type: Array.&lt;Component&gt; Source: lib/nexus/v1/item.js, line 20 demand :Object.&lt;number&gt; Demand for the component Type: Object.&lt;number&gt; Source: lib/nexus/v2/item.js, line 48 demand :Object.&lt;number&gt; Demand for the component Type: Object.&lt;number&gt; Source: lib/nexus/v1/item.js, line 48 supply :Object.&lt;number&gt; Supply for the component Type: Object.&lt;number&gt; Source: lib/nexus/v2/item.js, line 42 supply :Object.&lt;number&gt; Supply for the component Type: Object.&lt;number&gt; Source: lib/nexus/v1/item.js, line 42 title :string Title (name) of item Type: string Source: lib/nexus/v2/item.js, line 26 title :string Title (name) of item Type: string Source: lib/nexus/v1/item.js, line 26 type :string Type of the item, such as: * Prime * Mods * Arcane * Syndicate Type: string Source: lib/nexus/v1/item.js, line 36 type :string Type of the item, such as: * Prime * Mods * Arcane * Syndicate Type: string Source: lib/nexus/v2/item.js, line 36 Methods toString() String representation of this Item. Source: lib/nexus/v2/item.js, line 62 Returns: Type string toString() String representation of this Item. Source: lib/nexus/v1/item.js, line 62 Returns: Type string Class: NexusItem NexusItem Describes an item, such as a prime item, mod, arcane, or syndicate item new NexusItem(data, path, settings) Parameters: Name Type Description data JSON to construct an item from path string for item on nexus-stats.com settings Object a settings object Source: lib/nexus/v1/item.js, line 9 Members components :Array.&lt;Component&gt; Array of Component objects Type: Array.&lt;Component&gt; Source: lib/nexus/v2/item.js, line 20 components :Array.&lt;Component&gt; Array of Component objects Type: Array.&lt;Component&gt; Source: lib/nexus/v1/item.js, line 20 demand :Object.&lt;number&gt; Demand for the component Type: Object.&lt;number&gt; Source: lib/nexus/v2/item.js, line 48 demand :Object.&lt;number&gt; Demand for the component Type: Object.&lt;number&gt; Source: lib/nexus/v1/item.js, line 48 supply :Object.&lt;number&gt; Supply for the component Type: Object.&lt;number&gt; Source: lib/nexus/v2/item.js, line 42 supply :Object.&lt;number&gt; Supply for the component Type: Object.&lt;number&gt; Source: lib/nexus/v1/item.js, line 42 title :string Title (name) of item Type: string Source: lib/nexus/v2/item.js, line 26 title :string Title (name) of item Type: string Source: lib/nexus/v1/item.js, line 26 type :string Type of the item, such as: * Prime * Mods * Arcane * Syndicate Type: string Source: lib/nexus/v1/item.js, line 36 type :string Type of the item, such as: * Prime * Mods * Arcane * Syndicate Type: string Source: lib/nexus/v2/item.js, line 36 Methods toString() String representation of this Item. Source: lib/nexus/v2/item.js, line 62 Returns: Type string toString() String representation of this Item. Source: lib/nexus/v1/item.js, line 62 Returns: Type string × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"PriceCheckQuerier.html":{"id":"PriceCheckQuerier.html","title":"Class: PriceCheckQuerier","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Class: PriceCheckQuerier PriceCheckQuerier Represents a queryable datastore of information derived from `https://nexus-stats.com/api` new PriceCheckQuerier() Creates an instance representing a WarframeNexusStats data object Source: index.js, line 23 Members attachmentCreator :AttachmentCreator Attachment creator for generating attachments Type: AttachmentCreator Source: index.js, line 52 marketFetcher :MarketFetcher Fetch market data Type: MarketFetcher Source: index.js, line 43 Methods &lt;async&gt; priceCheckQuery(query) Lookup a list of results for a query Parameters: Name Type Description query string Query to search the nexus-stats database against Source: index.js, line 60 Returns: a Promise of an array of Item objects Type Promise.&lt;Array.&lt;NexusItem&gt;&gt; &lt;async&gt; priceCheckQueryAttachment(query) Lookup a list of results for a query Parameters: Name Type Description query string Query to search the nexus-stats database against Source: index.js, line 98 Returns: a Promise of an array of attachment objects Type Array.&lt;Object&gt; &lt;async&gt; priceCheckQueryString(query) Lookup a list of results for a query Parameters: Name Type Description query string Query to search the nexus-stats database against Source: index.js, line 81 Returns: a Promise of a string containing the results of the query Type Promise.&lt;string&gt; × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"Settings.html":{"id":"Settings.html","title":"Class: Settings","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Class: Settings Settings Settings storage for nexus query new Settings() Properties: Name Type Description maxCacheLength number maximum length to store cached data nexusKey string User Key for Nexus-Stats nexusSecret string User Secret for Nexus-Stats nexusHubSecret string User Secret for NexusHub nexusHubKey string User Key for NexusHub urls Object URL list for nexus stats Source: lib/Settings.js, line 13 × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "},"Summary.html":{"id":"Summary.html","title":"Class: Summary","body":" warframe-nexus-query Classes ComponentNexusItemPriceCheckQuerierSettingsSummary Global padsafeRangesafeValue Class: Summary Summary Represents an individual component object of an item. new Summary(itemData) Represents an individual item. Parameters: Name Type Description itemData json the component data to parse into a summary Source: lib/market/v1/summary.js, line 11 Methods toString(opt) The components's string representation Parameters: Name Type Description opt string Option, either 'codex', 'item', 'location', 'all' Source: lib/market/v1/summary.js, line 39 Returns: Type string × Search results Close Documentation generated by JSDoc 3.5.5 on Friday, January 4th 2019, 19:11:39 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
