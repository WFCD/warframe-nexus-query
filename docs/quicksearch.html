<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"lib_nexus_v1_component.js.html":{"id":"lib_nexus_v1_component.js.html","title":"Source: lib/nexus/v1/component.js","body":" warframe-nexus-query Classes ComponentItemSummaryWarframeNexusStats Global padsafeRangesafeValue Source: lib/nexus/v1/component.js 'use strict'; /** * Represents an individual component object of an item. */ class Component { /** * Represents an individual component object of an item. * @param {json} data the component data to parse into a component * @constructor */ constructor(data) { /** * Name of the component, display value * @type {string} */ this.name = data.name; /** * Supply for the component * @type {number} */ this.supply = data.supply; /** * Demand for the component * @type {number} */ this.demand = data.demand; /** * Average prices for the component * @type {Object} * @property {number} avg - average value * @property {number} median - median value * @property {number} minimum - minimum value * @property {number} maximum - maximum value */ this.prices = { avg: data.avg, median: data.median, minimum: data.min, maximum: data.max, }; this.type = 'nexus-v1'; } /** * The components's string representation * @returns {string} */ toString() { return `\\u221F${this.padName(this.name)} | average: ${(this.prices.avg ? `${String(parseFloat(this.prices.avg).toFixed(2))}p` : '0p')}`; } /** * Pad the left side of a string so that all componets * have the same string length before the pipe * @param {string} locationString the location string to pad * @returns {string} the padded location string */ padName(locationString) { let stringRet; if (locationString.length &lt; 10) { stringRet = this.padName(`${locationString} `); } else { stringRet = locationString; } return stringRet; } } module.exports = Component; × Search results Close Documentation generated by JSDoc 3.4.2 on Saturday, June 3rd 2017, 22:06:42 using the DocStrap template. "},"lib_nexus_v1_item.js.html":{"id":"lib_nexus_v1_item.js.html","title":"Source: lib/nexus/v1/item.js","body":" warframe-nexus-query Classes ComponentItemSummaryWarframeNexusStats Global padsafeRangesafeValue Source: lib/nexus/v1/item.js 'use strict'; const md = require('node-md-config'); const Component = require('./component.js'); /** * Describes an item, such as a prime item, mod, arcane, or syndicate item */ class Item { /** * @param {JSON} data to construct an item from */ constructor(data) { /** * Array of Component objects * @type {Array&lt;Component&gt;} */ this.components = []; /** * Title (name) of item * @type {string} */ this.title = data.title; /** * Type of the item, such as: * * Prime * * Mods * * Arcane * * Syndicate * @type {string} */ this.type = data.type; /** * Supply for the component * @type {Object.&lt;number&gt;} */ this.supply = data.supply; /** * Demand for the component * @type {Object.&lt;number&gt;} */ this.demand = data.demand; data.components.forEach((componentData) =&gt; { this.components.push(new Component(componentData)); }); } /** * String representation of this Item. * @returns {string} */ toString() { let componentString = `${md.codeMulti}${this.title}${md.lineEnd}\\u3000Supply: ${this.supply.count} units - ` + `${String(parseFloat(this.supply.percentage).toFixed(2))}%${md.lineEnd}` + `\\u3000Demand: ${this.demand.count} units - ${String(parseFloat(this.demand.percentage).toFixed(2))}%` + `${md.lineEnd}\\u3000\\u3000`; for (let i = 0; i &lt; this.components.length; i += 1) { componentString += this.components[i].toString() + (i &lt; this.components.length - 1 ? `,${md.lineEnd}\\u3000\\u3000` : ''); } return `${componentString}${md.blockEnd}`; } } module.exports = Item; × Search results Close Documentation generated by JSDoc 3.4.2 on Saturday, June 3rd 2017, 22:06:42 using the DocStrap template. "},"index.js.html":{"id":"index.js.html","title":"Source: index.js","body":" warframe-nexus-query Classes ComponentItemSummaryWarframeNexusStats Global padsafeRangesafeValue Source: index.js 'use strict'; const JSONCache = require('json-fetch-cache'); const Promise = require('bluebird'); const md = require('node-md-config'); const jsonQuery = require('json-query'); const NexusItem = require('./lib/nexus/v1/item.js'); const NexusFetcher = require('nexus-stats-api'); const MarketFetcher = require('./lib/market/v1/MarketFetcher.js'); const maxCacheLength = process.env.NEXUSSTATS_MAX_CACHED_TIME || 60000; const urls = { nexus: process.env.NEXUSSTATS_URL_OVERRIDE || 'https://api.nexus-stats.com/warframe/v1/items', market: process.env.MARKET_URL_OVERRIDE || 'https://api.warframe.market/v1/items', marketAssets: process.env.MARKET_ASSETS_URL_OVERRIDE || 'https://warframe.market/static/assets/', }; const defaultString = 'Operator, there is no such item pricecheck available.'; const noResultAttachment = { type: 'rich', description: 'No result', color: '0xff55ff', url: 'https://warframe.market', footer: { text: 'Pricechecks from NexusStats and Warframe.Market', }, }; /** * Calculate the safe value for a provided value * @param {string} value provided value * @returns {string} safe value */ function safeValue(value) { return value ? `${value}p` : 'No data'; } /** * Calculate the safe value for a provided value * @param {string} value1 provided minimum value * @param {string} value2 provided maximum value * @returns {string} safe value */ function safeRange(value1, value2) { return value1 ? `${value1}p - ${value2}p` : 'No data'; } /** * Pad the left side of a string so that all componets * have the same string length before the pipe * @param {string} str the location string to pad * @param {number} length to make the string * @returns {string} the padded location string */ function pad(str, length) { let stringRet; const len = length || 10; if (str.length &lt; len) { stringRet = pad(`${str} `, len); } else { stringRet = str; } return stringRet; } function attachmentFromComponents(components, query) { const attachment = { type: 'rich', title: query, color: '0xff00ff', url: '', fields: [], thumbnail: { url: '' }, footer: { icon_url: '', text: 'Price data provided by Nexus Stats &amp; Warframe.Market', }, }; const nexusComponents = components .filter(component =&gt; component &amp;&amp; component.components &amp;&amp; component.components[0].type === 'nexus-v1'); const marketComponents = components .filter(component =&gt; component &amp;&amp; component.type === 'market-v1'); if (nexusComponents.length &gt; 0) { nexusComponents .forEach((nexusComponent) =&gt; { attachment.title = nexusComponent.title; nexusComponent.components .forEach((component) =&gt; { let found = false; marketComponents .forEach((marketComponent) =&gt; { if (!found &amp;&amp; marketComponent.name.indexOf(component.name) &gt; -1) { found = true; attachment.color = marketComponent.color; attachment.url = marketComponent.url; attachment.thumbnail.url = `https://nexus-stats.com/img/items/${encodeURIComponent(nexusComponent.title)}-min.png`; attachment.description = `Query results for: &quot;${query}&quot;`; const nexusMedian = safeValue(component.prices.median); const nexusRange = safeRange(component.prices.minimum, component.prices.maximum); const marketMedian = safeValue(marketComponent.prices.soldPrice); const marketRange = safeRange(marketComponent.prices.minimum, marketComponent.prices.maximum); attachment.fields.push({ name: component.name, value: '```haskell\\n' + `${pad('Value', 7)}|${pad(' Nexus', 13)}|${pad(' Market')}\\n` + `${pad('Median', 7)}|${pad(` ${nexusMedian}`, 13)}|${pad(` ${marketMedian}`)}\\n` + `${pad('Range', 7)}|${pad(` ${nexusRange}`, 13)}|${pad(` ${marketRange}`)}\\n\\n` + `Trade Tax: ${marketComponent.tradingTax}cr\\n` + '```\\n', inline: true, }); } }); }); attachment.fields.push({ name: '_ _', value: `Supply: **${nexusComponent.supply.count}** units (${String(parseFloat(nexusComponent.supply.percentage).toFixed(2))}%) ` + `- Demand: **${nexusComponent.demand.count}** units (${String(parseFloat(nexusComponent.demand.percentage).toFixed(2))}%)`, }); }); } else if (marketComponents.length &gt; 0) { marketComponents .forEach((marketComponent) =&gt; { attachment.color = marketComponent.color; attachment.title = marketComponent.name.replace(/\\sset/i, ''); attachment.url = marketComponent.url; attachment.thumbnail.url = marketComponent.thumbnail; attachment.description = `Query results for: &quot;${query}&quot;`; attachment.fields.push({ name: marketComponent.name, value: `**Trade Tax:** ${marketComponent.tradingTax}cr\\n` + `Median: ${marketComponent.prices.soldCount} sold at ${marketComponent.prices.soldPrice}p\\n` + `Range: ${marketComponent.prices.minimum}p - ${marketComponent.prices.maximum}p`, inline: true, }); }); } else { return noResultAttachment; } return attachment; } /** * Represents a queryable datastore of information derived from `https://nexus-stats.com/api` */ class WarframeNexusStats { /** * Creates an instance representing a WarframeNexusStats data object * @constructor */ constructor() { /** * The json cache storing data from nexus-stats.com * @type {JSONCache} */ this.nexusCache = new JSONCache(urls.nexus, maxCacheLength); this.nexusFetcher = new NexusFetcher(); /** * The json cache stpromg data from warframe.market * @type {JSONCache} */ this.marketCache = new JSONCache(urls.market, maxCacheLength); this.marketFetcher = new MarketFetcher(); } /** * Lookup a list of results for a query * @param {string} query Query to search the nexus-stats database against * @returns {Promise&lt;Array&lt;NexusItem&gt;&gt;} a Promise of an array of Item objects */ priceCheckQuery(query) { return new Promise((resolve, reject) =&gt; { this.nexusCache.getDataJson() .then((dataCache) =&gt; { const results = jsonQuery(`[*name~/^${query}/i]`, { data: dataCache, allowRegexp: true, }); const componentsToReturn = []; if (typeof results.value === 'undefined') { resolve({}); return; } if (!results.value || JSON.stringify(results.value) === '[]') { resolve([defaultString]); } this.nexusFetcher.getItemStats(results.value[0].name) .then((queryResults) =&gt; { if (Object.keys(queryResults).length &gt; 0) { componentsToReturn.push(new NexusItem(queryResults)); } resolve(componentsToReturn); }) // eslint-disable-next-line no-console .catch(console.error); }) .catch(reject); }) .then(nexusComponents =&gt; new Promise((resolve) =&gt; { this.marketCache.getDataJson() .then((dataCache) =&gt; { const results = jsonQuery(`en[*item_name~/^${query}.*/i]`, { data: dataCache.payload.items, allowRegexp: true, }).value; if (results.length &lt; 1) { resolve(nexusComponents); } results.map(result =&gt; result.url_name) .map(urlName =&gt; this.marketFetcher.resultForItem(urlName) .then((queryResults) =&gt; { const components = nexusComponents.concat(queryResults); resolve(components); }) // eslint-disable-next-line no-console .catch(console.error)); }) // eslint-disable-next-line no-console .catch(console.error); })); } /** * Lookup a list of results for a query * @param {string} query Query to search the nexus-stats database against * @returns {Promise&lt;string&gt;} a Promise of a string containing the results of the query */ priceCheckQueryString(query) { return new Promise((resolve) =&gt; { this.priceCheckQuery(query) .then((components) =&gt; { const tokens = []; components.slice(0, 4).forEach((component) =&gt; { tokens.push(`${md.lineEnd}${component.toString()}`); }); let componentsToReturnString = `${md.codeMulti}${tokens.join()}${md.blockEnd}`; componentsToReturnString = components.length &gt; 0 ? componentsToReturnString : defaultString; resolve(componentsToReturnString); }); }); } /** * Lookup a list of results for a query * @param {string} query Query to search the nexus-stats database against * @returns {Promise&lt;Object&gt;} a Promise of an array of attachment objects */ priceCheckQueryAttachment(query) { return new Promise((resolve) =&gt; { this.priceCheckQuery(query) .then((components) =&gt; { noResultAttachment.description = `No result for ${typeof query !== 'undefined' ? query : 'no search string'}`; if ((components.length &gt; 0 &amp;&amp; components[0] === defaultString) || components.length === 0) { resolve([noResultAttachment]); } resolve([attachmentFromComponents(components, query)]); }) // eslint-disable-next-line no-console .catch(console.error); }); } } module.exports = WarframeNexusStats; × Search results Close Documentation generated by JSDoc 3.4.2 on Saturday, June 3rd 2017, 22:06:42 using the DocStrap template. "},"lib_market_v1_summary.js.html":{"id":"lib_market_v1_summary.js.html","title":"Source: lib/market/v1/summary.js","body":" warframe-nexus-query Classes ComponentItemSummaryWarframeNexusStats Global padsafeRangesafeValue Source: lib/market/v1/summary.js 'use strict'; const urls = { market: process.env.MARKET_URL_OVERRIDE || 'https://api.warframe.market/v1/items', marketAssets: process.env.MARKET_ASSETS_URL_OVERRIDE || 'https://warframe.market/static/assets/', }; /** * Represents an individual component object of an item. */ class Summary { /** * Represents an individual item. * @param {json} itemData the component data to parse into a summary * @constructor */ constructor(itemData) { this.name = itemData.en.item_name; this.thumbnail = `${urls.marketAssets}${itemData.thumb}`; this.partThumb = `${urls.marketAssets}${itemData.sub_icon}`; this.tradingTax = itemData.trading_tax || 0; this.ducats = itemData.ducats || 0; this.masteryLevel = itemData.mastery_level; this.tradable = itemData.tradable; this.wikiUrl = itemData.en.wiki_link; this.codex = itemData.en.codex; this.description = itemData.en.description.replace(/&lt;\\/?p&gt;/ig, ''); this.drops = itemData.en.drop; this.url = `http://warframe.market/items/${itemData.url_name}`; this.type = 'market-v1'; } /** * The components's string representation * @param {string} opt Option, either 'codex', 'item', 'location', 'all' * @returns {string} */ toString(opt) { let value = this.name; if (opt === 'codex' || opt === 'all') { value += `\\`\\`\\`\\n` + `Codex: ${this.codex}\\n`; } if (opt === 'item' || opt === 'all') { value += `${this.pad(`Requires: ${this.masteryLevel}`, 15)}| Tax: ${this.pad(`${this.tradingTax}cr`)}\\n` + `Item is ${this.tradable ? '' : ' not '} tradable\\n` + `${this.pad(`Sold ${this.prices.soldCount} for ${this.prices.soldPrice}`, 15)}|` + `Minimum ${this.prices.minimum} | Maximum ${this.prices.maximum}\\n`; } if (opt === 'location' || opt === 'all') { value += `${this.pad(`Drops: ${this.drops.map(drop =&gt; drop.name).join(', ')}`, 15)}\\n`; } value += `\\`\\`\\`\\n${this.wikiUrl}`; return `\\u221F${value}`; } pad(str, length, character) { let stringRet; if (str.length &lt; (length || 10)) { stringRet = this.padName(`${str}${character || ' '}`); } else { stringRet = str; } return stringRet; } } module.exports = Summary; × Search results Close Documentation generated by JSDoc 3.4.2 on Saturday, June 3rd 2017, 22:06:42 using the DocStrap template. "},"global.html":{"id":"global.html","title":"Global","body":" warframe-nexus-query Classes ComponentItemSummaryWarframeNexusStats Global padsafeRangesafeValue Global Methods pad(str, length) Pad the left side of a string so that all componets have the same string length before the pipe Parameters: Name Type Description str string the location string to pad length number to make the string Source: index.js, line 58 Returns: the padded location string Type string safeRange(value1, value2) Calculate the safe value for a provided value Parameters: Name Type Description value1 string provided minimum value value2 string provided maximum value Source: index.js, line 47 Returns: safe value Type string safeValue(value) Calculate the safe value for a provided value Parameters: Name Type Description value string provided value Source: index.js, line 37 Returns: safe value Type string × Search results Close Documentation generated by JSDoc 3.4.2 on Saturday, June 3rd 2017, 22:06:42 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" warframe-nexus-query Classes ComponentItemSummaryWarframeNexusStats Global padsafeRangesafeValue Classes Classes Component Item Summary WarframeNexusStats × Search results Close Documentation generated by JSDoc 3.4.2 on Saturday, June 3rd 2017, 22:06:42 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" warframe-nexus-query Classes ComponentItemSummaryWarframeNexusStats Global padsafeRangesafeValue warframe-nexus-query A node project for allowing simple access to the https://nexus-stats.com/ api. Get Help on Discord Installationnpm install --save warframe-nexus-queryUsage Require Module File Accessor Description parameters warframe-nexus-query index.js .priceCheckQueryString Get Query result string query, callback warframe-nexus-query index.js .priceCheckQuery Get Query result objects, has more parameters available query, callback Environment variables Variable example default NEXUSSTATS_MAX_CACHED_TIME 600000 30000 NEXUSSTATS_URL_OVERRIDE 'https://nexus-stats.com/api' https://nexus-stats.com/api ObjectsItem components - List of component objects id - Unique identifier for the Item object title - Title of the item type - Type of the item supplyPercent - Of the total amount of item listings for this object, this is the percent for sale demandPercent - Of the total amount of item listings for this object, this is t looking to be bought supplyAmount - Of the total amount of item listings for this object, this is the number for sale demandAmount - Of the total amount of item listings for this object, this is the number looking to be bought Component name - Name of the component avgPrice - Average platinum price rawAverage - Raw average (non-rounded) price of the component data - Array of Miscellaneous data × Search results Close Documentation generated by JSDoc 3.4.2 on Saturday, June 3rd 2017, 22:06:42 using the DocStrap template. "},"Component.html":{"id":"Component.html","title":"Class: Component","body":" warframe-nexus-query Classes ComponentItemSummaryWarframeNexusStats Global padsafeRangesafeValue Class: Component Component Represents an individual component object of an item. new Component(data) Represents an individual component object of an item. Parameters: Name Type Description data json the component data to parse into a component Source: lib/nexus/v1/component.js, line 6 Members demand :number Demand for the component Type: number Source: lib/nexus/v1/component.js, line 30 name :string Name of the component, display value Type: string Source: lib/nexus/v1/component.js, line 18 prices :Object Average prices for the component Type: Object Properties: Name Type Description avg number average value median number median value minimum number minimum value maximum number maximum value Source: lib/nexus/v1/component.js, line 40 supply :number Supply for the component Type: number Source: lib/nexus/v1/component.js, line 24 Methods padName(locationString) Pad the left side of a string so that all componets have the same string length before the pipe Parameters: Name Type Description locationString string the location string to pad Source: lib/nexus/v1/component.js, line 64 Returns: the padded location string Type string toString() The components's string representation Source: lib/nexus/v1/component.js, line 54 Returns: Type string × Search results Close Documentation generated by JSDoc 3.4.2 on Saturday, June 3rd 2017, 22:06:42 using the DocStrap template. "},"Item.html":{"id":"Item.html","title":"Class: Item","body":" warframe-nexus-query Classes ComponentItemSummaryWarframeNexusStats Global padsafeRangesafeValue Class: Item Item Describes an item, such as a prime item, mod, arcane, or syndicate item new Item(data) Parameters: Name Type Description data JSON to construct an item from Source: lib/nexus/v1/item.js, line 9 Members components :Array.&lt;Component&gt; Array of Component objects Type: Array.&lt;Component&gt; Source: lib/nexus/v1/item.js, line 19 demand :Object.&lt;number&gt; Demand for the component Type: Object.&lt;number&gt; Source: lib/nexus/v1/item.js, line 47 supply :Object.&lt;number&gt; Supply for the component Type: Object.&lt;number&gt; Source: lib/nexus/v1/item.js, line 41 title :string Title (name) of item Type: string Source: lib/nexus/v1/item.js, line 25 type :string Type of the item, such as: * Prime * Mods * Arcane * Syndicate Type: string Source: lib/nexus/v1/item.js, line 35 Methods toString() String representation of this Item. Source: lib/nexus/v1/item.js, line 58 Returns: Type string × Search results Close Documentation generated by JSDoc 3.4.2 on Saturday, June 3rd 2017, 22:06:42 using the DocStrap template. "},"Summary.html":{"id":"Summary.html","title":"Class: Summary","body":" warframe-nexus-query Classes ComponentItemSummaryWarframeNexusStats Global padsafeRangesafeValue Class: Summary Summary Represents an individual component object of an item. new Summary(itemData) Represents an individual item. Parameters: Name Type Description itemData json the component data to parse into a summary Source: lib/market/v1/summary.js, line 11 Methods toString(opt) The components's string representation Parameters: Name Type Description opt string Option, either 'codex', 'item', 'location', 'all' Source: lib/market/v1/summary.js, line 40 Returns: Type string × Search results Close Documentation generated by JSDoc 3.4.2 on Saturday, June 3rd 2017, 22:06:42 using the DocStrap template. "},"WarframeNexusStats.html":{"id":"WarframeNexusStats.html","title":"Class: WarframeNexusStats","body":" warframe-nexus-query Classes ComponentItemSummaryWarframeNexusStats Global padsafeRangesafeValue Class: WarframeNexusStats WarframeNexusStats Represents a queryable datastore of information derived from `https://nexus-stats.com/api` new WarframeNexusStats() Creates an instance representing a WarframeNexusStats data object Source: index.js, line 153 Members marketCache :JSONCache The json cache stpromg data from warframe.market Type: JSONCache Source: index.js, line 171 nexusCache :JSONCache The json cache storing data from nexus-stats.com Type: JSONCache Source: index.js, line 163 Methods priceCheckQuery(query) Lookup a list of results for a query Parameters: Name Type Description query string Query to search the nexus-stats database against Source: index.js, line 181 Returns: a Promise of an array of Item objects Type Promise.&lt;Array.&lt;NexusItem&gt;&gt; priceCheckQueryAttachment(query) Lookup a list of results for a query Parameters: Name Type Description query string Query to search the nexus-stats database against Source: index.js, line 262 Returns: a Promise of an array of attachment objects Type Promise.&lt;Object&gt; priceCheckQueryString(query) Lookup a list of results for a query Parameters: Name Type Description query string Query to search the nexus-stats database against Source: index.js, line 241 Returns: a Promise of a string containing the results of the query Type Promise.&lt;string&gt; × Search results Close Documentation generated by JSDoc 3.4.2 on Saturday, June 3rd 2017, 22:06:42 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
